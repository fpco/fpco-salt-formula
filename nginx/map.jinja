{% set nginx = salt['pillar.get']('nginx', {
    'install': {
        'version': 'stable',
        'pkg_name': 'nginx'
    },
    'server': {
        'vhost_available': '/etc/nginx/sites-available',
        'vhost_enabled': '/etc/nginx/sites-enabled',
        'config': {
            'user': 'www-data',
            'worker_processes': 4,
            'pid': '/run/nginx.pid',
            'events': {
                'worker_connections': 768,
            },
            'http': {
                'sendfile': 'on',
                'tcp_nopush': 'on',
                'tcp_nodelay': 'on',
                'keepalive_timeout': '65',
                'types_hash_max_size': '2048',
                'default_type': 'application/octet-stream',
                'access_log': '/var/log/nginx/access.log',
                'error_log': '/var/log/nginx/error.log',
                'gzip': 'off',
                'gzip_disable': '"msie6"',
                'include': [
                    '/etc/nginx/mime.types',
                    '/etc/nginx/conf.d/*.conf',
                    '/etc/nginx/sites-enabled/*',
                ],
            },
        },
    },
}, merge=True) %}
