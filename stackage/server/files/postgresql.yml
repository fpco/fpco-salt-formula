{%- set dbname = salt['pillar.get']('stackage:db:name', 'stackage_server_beta') %}
{%- set user = salt['pillar.get']('stackage:db:user', 'stackage_server_beta') %}
{%- set pass = salt['pillar.get']('stackage:db:pass', 'stackage_server_beta') %}
{%- set host = salt['pillar.get']('stackage:db:host', 'docker_db') %}
{%- set port = salt['pillar.get']('stackage:db:port', 5432) %}
{%- set poolsize = salt['pillar.get']('stackage:db:poolsize', 10) %}


Default: &defaults
  user: {{ user }}
  password: {{ pass }}
  host: {{ host }}
  port: {{ port }}
  database: {{ dbname }}
  poolsize: {{ poolsize }}

Development:
  <<: *defaults

Testing:
  database: stackage_server_test
  <<: *defaults

Staging:
  poolsize: 100
  <<: *defaults

Production:
  database: stackage_server_production
  poolsize: 100
  <<: *defaults
